name: util-cos
description: This component provides COS utility functions (e.g. creating a bucket, listing contents of a bucket)
 CLAIMED v0.15

inputs:
- {name: access_key_id, type: String, description: 'access key id'}
- {name: secret_access_key, type: String, description: 'secret access key'}
- {name: endpoint, type: String, description: 'cos/s3 endpoint'}
- {name: bucket_name, type: String, description: 'cos bucket name'}
- {name: path, type: String, description: 'path'}
- {name: source, type: String, description: 'source in case of uploads'}
- {name: recursive, type: String, description: 'recursive'}
- {name: operation, type: String, description: 'operation (mkdir|ls|find|get|put|rm|sync)'}
- {name: log_level, type: String, description: 'log level'}


outputs:
- {name: output_target, type: String, description: 'target in case of downloads'}


implementation:
    container:
        image: romeokienzler/claimed-util-cos:0.15
        command:
        - sh
        - -ec
        - |
          ipython ./util-cos.ipynb output_target="$0" access_key_id="$1" secret_access_key="$2" endpoint="$3" bucket_name="$4" path="$5" source="$6" recursive="$7" operation="$8" log_level="$9" 
        - {outputPath: output_target}
        - {inputValue: access_key_id}
        - {inputValue: secret_access_key}
        - {inputValue: endpoint}
        - {inputValue: bucket_name}
        - {inputValue: path}
        - {inputValue: source}
        - {inputValue: recursive}
        - {inputValue: operation}
        - {inputValue: log_level}
